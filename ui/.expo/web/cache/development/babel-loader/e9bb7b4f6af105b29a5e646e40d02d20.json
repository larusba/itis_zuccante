{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"label\", \"labelStyle\", \"error\", \"onChange\", \"inputType\", \"contentType\", \"value\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport React, { useEffect } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport * as ImagePicker from 'expo-image-picker';\nimport { MaterialIcons } from '@expo/vector-icons';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nexport default React.forwardRef(function (props, ref) {\n  var label = props.label,\n    labelStyle = props.labelStyle,\n    error = props.error,\n    onChange = props.onChange,\n    inputType = props.inputType,\n    contentType = props.contentType,\n    value = props.value,\n    otherProps = _objectWithoutProperties(props, _excluded);\n  useEffect(function () {\n    _asyncToGenerator(function* () {\n      if (Platform.OS !== 'web') {\n        var _yield$ImagePicker$re = yield ImagePicker.requestMediaLibraryPermissionsAsync(),\n          status = _yield$ImagePicker$re.status;\n        if (status !== 'granted') {\n          alert('Sorry, Camera roll permissions are required to make this work!');\n        }\n      }\n    })();\n  }, []);\n  var choosePhoto = function () {\n    var _ref2 = _asyncToGenerator(function* () {\n      var result = yield ImagePicker.launchImageLibraryAsync({\n        mediaTypes: ImagePicker.MediaTypeOptions.All,\n        aspect: [4, 3],\n        quality: 1,\n        allowsEditing: true,\n        base64: true\n      });\n      if (!result.cancelled) {\n        onChange(result.base64);\n      }\n    });\n    return function choosePhoto() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var removePhoto = function removePhoto() {\n    onChange('');\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [label && _jsx(Text, {\n      style: [styles.label, labelStyle],\n      children: label\n    }), _jsx(Button, {\n      title: \"Choose Photo\",\n      onPress: choosePhoto\n    }), value ? _jsxs(View, {\n      children: [_jsx(Image, _objectSpread({\n        ref: ref,\n        style: [styles.imageSize, {\n          borderColor: error ? '#fc6d47' : '#c0cbd3'\n        }],\n        source: {\n          uri: inputType === 'image-base64' ? \"data:\" + contentType + \";base64,\" + value : value\n        }\n      }, otherProps)), _jsx(MaterialIcons, {\n        name: \"delete\",\n        size: 24,\n        color: \"red\",\n        onPress: removePhoto,\n        style: styles.deleteIcon\n      })]\n    }) : _jsx(_Fragment, {}), !!error && !!error.message && _jsx(Text, {\n      style: styles.textError,\n      children: error && error.message\n    })]\n  });\n});\nvar styles = StyleSheet.create({\n  imageSize: {\n    width: '100%',\n    height: undefined,\n    aspectRatio: 1\n  },\n  container: {\n    marginVertical: 8\n  },\n  label: {\n    paddingVertical: 5,\n    fontSize: 16,\n    fontWeight: 'bold'\n  },\n  textError: {\n    color: '#fc6d47',\n    fontSize: 14\n  },\n  deleteIcon: {\n    right: 0,\n    top: -60,\n    position: 'absolute'\n  }\n});","map":{"version":3,"names":["React","useEffect","View","StyleSheet","Text","Image","Button","Platform","ImagePicker","MaterialIcons","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","forwardRef","props","ref","label","labelStyle","error","onChange","inputType","contentType","value","otherProps","_objectWithoutProperties","_excluded","_asyncToGenerator","OS","_yield$ImagePicker$re","requestMediaLibraryPermissionsAsync","status","alert","choosePhoto","_ref2","result","launchImageLibraryAsync","mediaTypes","MediaTypeOptions","All","aspect","quality","allowsEditing","base64","cancelled","apply","arguments","removePhoto","style","styles","container","children","title","onPress","_objectSpread","imageSize","borderColor","source","uri","name","size","color","deleteIcon","message","textError","create","width","height","undefined","aspectRatio","marginVertical","paddingVertical","fontSize","fontWeight","right","top","position"],"sources":["/Users/albertodelazzari/repositories/ambulanza_veloce/ui/app/shared/components/form/inputs/jhi-image-input.js"],"sourcesContent":["import React, { useEffect } from 'react';\nimport { View, StyleSheet, Text, Image, Button, Platform } from 'react-native';\nimport * as ImagePicker from 'expo-image-picker';\nimport { MaterialIcons } from '@expo/vector-icons';\n/* eslint-disable react-native/no-inline-styles */\n\nexport default React.forwardRef((props, ref) => {\n  const { label, labelStyle, error, onChange, inputType, contentType, value, ...otherProps } = props;\n\n  useEffect(() => {\n    (async () => {\n      if (Platform.OS !== 'web') {\n        const { status } = await ImagePicker.requestMediaLibraryPermissionsAsync();\n        if (status !== 'granted') {\n          // eslint-disable-next-line no-alert\n          alert('Sorry, Camera roll permissions are required to make this work!');\n        }\n      }\n    })();\n  }, []);\n\n  const choosePhoto = async () => {\n    let result = await ImagePicker.launchImageLibraryAsync({\n      mediaTypes: ImagePicker.MediaTypeOptions.All,\n      aspect: [4, 3],\n      quality: 1,\n      allowsEditing: true,\n      base64: true,\n    });\n    if (!result.cancelled) {\n      onChange(result.base64);\n    }\n  };\n\n  const removePhoto = () => {\n    onChange('');\n  };\n\n  return (\n    <View style={styles.container}>\n      {/* if there's a label, render it */}\n      {label && <Text style={[styles.label, labelStyle]}>{label}</Text>}\n      <Button title=\"Choose Photo\" onPress={choosePhoto} />\n      {/* render the base64 image or plain image input */}\n      {value ? (\n        <View>\n          <Image\n            ref={ref}\n            style={[styles.imageSize, { borderColor: error ? '#fc6d47' : '#c0cbd3' }]}\n            source={{ uri: inputType === 'image-base64' ? `data:${contentType};base64,${value}` : value }}\n            {...otherProps}\n          />\n          <MaterialIcons name=\"delete\" size={24} color=\"red\" onPress={removePhoto} style={styles.deleteIcon} />\n        </View>\n      ) : (\n        <></>\n      )}\n      {/* if there's an error, render it */}\n      {!!error && !!error.message && <Text style={styles.textError}>{error && error.message}</Text>}\n    </View>\n  );\n});\n\nconst styles = StyleSheet.create({\n  imageSize: {\n    width: '100%',\n    height: undefined,\n    aspectRatio: 1,\n  },\n  container: {\n    marginVertical: 8,\n  },\n  label: {\n    paddingVertical: 5,\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n  textError: {\n    color: '#fc6d47',\n    fontSize: 14,\n  },\n  deleteIcon: {\n    right: 0,\n    top: -60,\n    position: 'absolute',\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}