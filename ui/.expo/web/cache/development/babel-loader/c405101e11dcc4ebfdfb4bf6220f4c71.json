{"ast":null,"code":"import apisauce from 'apisauce';\nimport AppConfig from \"../../config/app-config\";\nvar create = function create() {\n  var baseURL = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : AppConfig.apiUrl;\n  var api = apisauce.create({\n    baseURL: baseURL,\n    headers: {\n      'Cache-Control': 'no-cache'\n    },\n    timeout: 10000\n  });\n  var setAuthToken = function setAuthToken(userAuth) {\n    return api.setHeader('Authorization', 'Bearer ' + userAuth);\n  };\n  var removeAuthToken = function removeAuthToken() {\n    return api.deleteHeader('Authorization');\n  };\n  var login = function login(userAuth) {\n    return api.post('api/authenticate', userAuth);\n  };\n  var register = function register(user) {\n    return api.post('api/register', user);\n  };\n  var forgotPassword = function forgotPassword(data) {\n    return api.post('api/account/reset-password/init', data, {\n      headers: {\n        'Content-Type': 'text/plain',\n        Accept: 'application/json, text/plain, */*'\n      }\n    });\n  };\n  var getAccount = function getAccount() {\n    return api.get('api/account');\n  };\n  var updateAccount = function updateAccount(account) {\n    return api.post('api/account', account);\n  };\n  var changePassword = function changePassword(currentPassword, newPassword) {\n    return api.post('api/account/change-password', {\n      currentPassword: currentPassword,\n      newPassword: newPassword\n    }, {\n      headers: {\n        'Content-Type': 'application/json',\n        Accept: 'application/json, text/plain, */*'\n      }\n    });\n  };\n  var getUser = function getUser(userId) {\n    return api.get('api/users/' + userId);\n  };\n  var getAllUsers = function getAllUsers(options) {\n    return api.get('api/users', options);\n  };\n  var createUser = function createUser(user) {\n    return api.post('api/users', user);\n  };\n  var updateUser = function updateUser(user) {\n    return api.put('api/users', user);\n  };\n  var deleteUser = function deleteUser(userId) {\n    return api.delete('api/users/' + userId);\n  };\n  return {\n    createUser: createUser,\n    updateUser: updateUser,\n    getAllUsers: getAllUsers,\n    getUser: getUser,\n    deleteUser: deleteUser,\n    setAuthToken: setAuthToken,\n    removeAuthToken: removeAuthToken,\n    login: login,\n    register: register,\n    forgotPassword: forgotPassword,\n    getAccount: getAccount,\n    updateAccount: updateAccount,\n    changePassword: changePassword\n  };\n};\nexport default {\n  create: create\n};","map":{"version":3,"names":["apisauce","AppConfig","create","baseURL","arguments","length","undefined","apiUrl","api","headers","timeout","setAuthToken","userAuth","setHeader","removeAuthToken","deleteHeader","login","post","register","user","forgotPassword","data","Accept","getAccount","get","updateAccount","account","changePassword","currentPassword","newPassword","getUser","userId","getAllUsers","options","createUser","updateUser","put","deleteUser","delete"],"sources":["/Users/albertodelazzari/repositories/ambulanza_veloce/ui/app/shared/services/api.js"],"sourcesContent":["// a library to wrap and simplify api calls\nimport apisauce from 'apisauce';\n\nimport AppConfig from '../../config/app-config';\n\n// our \"constructor\"\nconst create = (baseURL = AppConfig.apiUrl) => {\n  // ------\n  // STEP 1\n  // ------\n  //\n  // Create and configure an apisauce-based api object.\n  //\n  const api = apisauce.create({\n    // base URL is read from the \"constructor\"\n    baseURL,\n    // here are some default headers\n    headers: {\n      'Cache-Control': 'no-cache',\n    },\n    // 10 second timeout...\n    timeout: 10000,\n  });\n\n  // ------\n  // STEP 2\n  // ------\n  //\n  // Define some functions that call the api.  The goal is to provide\n  // a thin wrapper of the api layer providing nicer feeling functions\n  // rather than \"get\", \"post\" and friends.\n  //\n  // I generally don't like wrapping the output at this level because\n  // sometimes specific actions need to be take on `403` or `401`, etc.\n  //\n  // Since we can't hide from that, we embrace it by getting out of the\n  // way at this level.\n  //\n  const setAuthToken = userAuth => api.setHeader('Authorization', 'Bearer ' + userAuth);\n  const removeAuthToken = () => api.deleteHeader('Authorization');\n  const login = userAuth => api.post('api/authenticate', userAuth);\n  const register = user => api.post('api/register', user);\n  const forgotPassword = data =>\n    api.post('api/account/reset-password/init', data, {\n      headers: { 'Content-Type': 'text/plain', Accept: 'application/json, text/plain, */*' },\n    });\n\n  const getAccount = () => api.get('api/account');\n  const updateAccount = account => api.post('api/account', account);\n  const changePassword = (currentPassword, newPassword) =>\n    api.post(\n      'api/account/change-password',\n      { currentPassword, newPassword },\n      { headers: { 'Content-Type': 'application/json', Accept: 'application/json, text/plain, */*' } }\n    );\n\n  const getUser = userId => api.get('api/users/' + userId);\n  const getAllUsers = options => api.get('api/users', options);\n  const createUser = user => api.post('api/users', user);\n  const updateUser = user => api.put('api/users', user);\n  const deleteUser = userId => api.delete('api/users/' + userId);\n  // jhipster-react-native-api-method-needle\n\n  // ------\n  // STEP 3\n  // ------\n  //\n  // Return back a collection of functions that we would consider our\n  // interface.  Most of the time it'll be just the list of all the\n  // methods in step 2.\n  //\n  // Notice we're not returning back the `api` created in step 1?  That's\n  // because it is scoped privately.  This is one way to create truly\n  // private scoped goodies in JavaScript.\n  //\n  return {\n    // a list of the API functions from step 2\n    createUser,\n    updateUser,\n    getAllUsers,\n    getUser,\n    deleteUser,\n    // jhipster-react-native-api-export-needle\n    setAuthToken,\n    removeAuthToken,\n    login,\n    register,\n    forgotPassword,\n    getAccount,\n    updateAccount,\n    changePassword,\n  };\n};\n\n// let's return back our create method as the default.\nexport default {\n  create,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}