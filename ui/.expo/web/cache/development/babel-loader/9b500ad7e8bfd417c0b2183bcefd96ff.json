{"ast":null,"code":"import { put, select } from 'redux-saga/effects';\nimport ChatActions from \"../../modules/chat/chat.reducer\";\nexport var selectState = function selectState(state, key, subKey) {\n  return state[key][subKey];\n};\nexport function processWebsocketMessage(_ref) {\n  var subscription = _ref.subscription,\n    msg = _ref.msg;\n  return function* () {\n    console.log(\"WS-Saga: \" + subscription);\n    switch (subscription) {\n      case 'chat':\n        var state = yield select(selectState, 'chat', 'chat');\n        var chat = [].concat(state);\n        chat.push(msg);\n        yield put(ChatActions.chatSuccess(chat));\n        break;\n      default:\n        console.log(\"Uncaught subscription: \" + subscription);\n        console.log(\"Uncaught message: \" + msg);\n    }\n  }();\n}","map":{"version":3,"names":["put","select","ChatActions","selectState","state","key","subKey","processWebsocketMessage","_ref","subscription","msg","console","log","chat","concat","push","chatSuccess"],"sources":["/Users/albertodelazzari/repositories/ambulanza_veloce/ui/app/shared/websockets/websocket.sagas.js"],"sourcesContent":["import { put, select } from 'redux-saga/effects'\n\nimport ChatActions from '../../modules/chat/chat.reducer'\n\nexport const selectState = (state, key, subKey) => state[key][subKey]\n\n// processes the websocket message\nexport function * processWebsocketMessage ({ subscription, msg }) {\n  console.log(`WS-Saga: ${subscription}`)\n  switch (subscription) {\n    case 'chat':\n      const state = yield select(selectState, 'chat', 'chat')\n      const chat = [].concat(state)\n      chat.push(msg)\n      yield put(ChatActions.chatSuccess(chat))\n      break\n    default:\n      console.log(`Uncaught subscription: ${subscription}`)\n      console.log(`Uncaught message: ${msg}`)\n  }\n}\n"],"mappings":"AAAA,SAASA,GAAG,EAAEC,MAAM,QAAQ,oBAAoB;AAEhD,OAAOC,WAAW;AAElB,OAAO,IAAMC,WAAW,GAAG,SAAdA,WAAWA,CAAIC,KAAK,EAAEC,GAAG,EAAEC,MAAM;EAAA,OAAKF,KAAK,CAACC,GAAG,CAAC,CAACC,MAAM,CAAC;AAAA;AAGrE,OAAO,SAAWC,uBAAuBA,CAAAC,IAAA;EAAA,IAAIC,YAAY,GAAAD,IAAA,CAAZC,YAAY;IAAEC,GAAG,GAAAF,IAAA,CAAHE,GAAG;EAAA,oBAAI;IAChEC,OAAO,CAACC,GAAG,eAAaH,YAAc,CAAC;IACvC,QAAQA,YAAY;MAClB,KAAK,MAAM;QACT,IAAML,KAAK,GAAG,MAAMH,MAAM,CAACE,WAAW,EAAE,MAAM,EAAE,MAAM,CAAC;QACvD,IAAMU,IAAI,GAAG,EAAE,CAACC,MAAM,CAACV,KAAK,CAAC;QAC7BS,IAAI,CAACE,IAAI,CAACL,GAAG,CAAC;QACd,MAAMV,GAAG,CAACE,WAAW,CAACc,WAAW,CAACH,IAAI,CAAC,CAAC;QACxC;MACF;QACEF,OAAO,CAACC,GAAG,6BAA2BH,YAAc,CAAC;QACrDE,OAAO,CAACC,GAAG,wBAAsBF,GAAK,CAAC;IAC3C;EACF,CAAC;AAAA"},"metadata":{},"sourceType":"module"}